{% extends 'inventario/index.html' %}
{% block contenido %}
{% load static %}

<div class="d-flex justify-content-center">
    <h2 class="text-center">Salida</h2>
</div>

<hr>
<div class="d-flex justify-content-center">
    <div class="col-10 d-flex justify-content-center flex-column">
        <div id="selected-product"></div>
        <div class="row d-flex justify-content-center mb-2">
            <div class="col mb-2">
                <input type="text" id="product-search" class="form-control" placeholder="Buscar Producto">
                <div class="d-flex justify-content-center mt-2">
                    <img src="" alt="" id="imagen" width="50">
                </div>
            </div>
        </div>

        <div class="row d-flex justify-content-center mb-2">
            <div class="col">
                <input type="number" id="cantidadSalida" name="cantidad" placeholder="Cantidad" class="form-control"
                    min="0">
                <div id="available-quantity"></div>
            </div>
            <div class="col">
                <input type="text" id="price" name="precio" placeholder="Precio" class="form-control" readonly>
            </div>
        </div>
        <input type="hidden" name="productoId" id="productoId">

        <div class="col text-center">
            <button id="agregar-producto" class="btn buttons">
                Agregar a la tabla
            </button>
        </div>
    </div>
</div>



<hr />
<div class="d-flex justify-content-center ">
    <div class="col-10 ">
        <table id="productos-seleccionados" class="display" style="width: 100%;">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Precio Unitario</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Aquí se mostrarán los productos seleccionados -->
            </tbody>
        </table>
    </div>
</div>
<div class="d-flex justify-content-center">
    <p>
        Total: <span id="total"></span>
    </p>
</div>


<div class="row mx-2">
    <div class="col">
        <div class="form-floating">
            <select id="cbCliente" name="cliente_id" class="form-select">
                <option value="">Selecciona un cliente</option>
                {% for cliente in clientes %}
                <option data-proveedor="{{ cliente.cliente_id }}" value="{{ cliente.id }}">{{ cliente.nombre }}
                </option>
                {% endfor %}
            </select>
            <label for="cliente_nombre" class="form-label">Cliente:</label>
        </div>
        <div class="d-flex justify-content-center mt-2 mb-2">
            <a class="btn buttons fw-bold" href="{% url 'clientes' %}"><i class="fa-solid fa-circle-plus"></i>
                Crear clientes
            </a>
        </div>
    </div>

</div>

<div class="row mx-2">
    <div class="col d-flex justify-content-center mt-3">
        <button id="realizar-venta" type="button" class="btn buttons mx-1 mt-3 fw-bold">Realizar Venta</button>
    </div>
    <div class="col d-flex justify-content-center mt-3">
        <button id="cancelar-salida" type="button" class="btn buttons mx-1 mt-3 fw-bold">cancelar salida</button>
    </div>
</div>
<script src="{% static 'js/salida.js' %}"></script>
{% endblock %}