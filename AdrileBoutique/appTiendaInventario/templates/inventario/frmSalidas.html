{% extends 'inventario/index.html' %}
{% block contenido %}
{% load static %}
<div class="row mt-3">
    <div class="col d-flex align-items-center justify-content-center">
        <div class="row d-flex justify-content-center">
            <h3 class="text-center">Salida</h3>
        </div>
    </div>
</div>
<hr>

<div class="row justify-content-center mx-2 mb-2">
    <div class="col">
        <div class="form-floating">
            <input type="text" id="product-search" class="form-control">
            <label for="product-search" class="form-label">Buscar producto:</label>
            <div id="selected-product"></div>
        </div>
    </div>
</div>

<div class="row justify-content-center mx-2 mb-2">
    <div id="available-quantity"> </div>
    <div class="col-3 d-flex">
        <button id="increase-quantity" class="btn fw-bold">+</button>
        <div class="form-floating">
            <input type="text" id="cantidadSalida" name="cantidad" placeholder="Cantidad" class="form-control" readonly>
            <label for="product-search" class="form-label">Cantidad :</label>
        </div>
        <button id="decrease-quantity" class="btn fw-bold">-</button>
    </div>

    <div class="col">
        <div class="form-floating">
            <input type="text" id="price" name="precio" placeholder="Precio" class="form-control" readonly>
            <label for="precioSalida" class="form-label">Precio :</label>
        </div>
    </div>
</div>
<input type="hidden" name="productoId" id="productoId">

<div class="col text-center">
    <button id="agregar-producto" class="btn buttons fw-bold">
        Agregar Producto
    </button>
</div>

<hr />
<div class="row">
    <div class="col">
        <table id="productos-seleccionados" class="table">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Precio Unitario</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Aquí se mostrarán los productos seleccionados -->
            </tbody>
        </table>
    </div>
</div>
<p>
    Total: <span id="total"></span>
</p>


<div class="row mx-2">
    <div class="col">
        <div class="form-floating">
            <select id="cbCliente" name="cliente_id" class="form-select">
                <option value="">Selecciona un cliente</option>
                {% for cliente in clientes %}
                <option data-proveedor="{{ cliente.cliente_id }}" value="{{ cliente.id }}">{{ cliente.nombre }}
                </option>
                {% endfor %}
            </select>
            <label for="cliente_nombre" class="form-label">Cliente:</label>
        </div>
        <div class="d-flex justify-content-center mt-2 mb-2">
            <a class="btn buttons fw-bold" href="{% url 'clientes' %}"><i class="fa-solid fa-circle-plus"></i>
                Crear clientes
            </a>
        </div>
    </div>

</div>

<div class="row mx-2">
    <div class="col d-flex justify-content-center mt-3">
        <button id="realizar-venta" type="button" class="btn buttons mx-1 mt-3 fw-bold">Realizar Venta</button>
    </div>
    <div class="col d-flex justify-content-center mt-3">
        <button id="cancelar-salida" type="button" class="btn buttons mx-1 mt-3 fw-bold">cancelar salida</button>
    </div>
</div>
<script src="{% static 'js/salida.js' %}"></script>
{% endblock %}